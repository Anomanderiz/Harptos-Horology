/* ============================================================
   Harptos â€“ Black / Gold / Red theme (responsive month grid)
   - Month uses a single grid that changes columns at breakpoints
   - Tiles stay square, no inner scrolling; more rows on smaller screens
   ============================================================ */

:root{
  --bg:#0a0a0a;
  --panel-top:#141416; --panel-bot:#0f0f11;

  --gold:#d4af37; --gold-soft:#f2e3a6; --gold-dim:#a38425;
  --red:#b11a1a; --red-strong:#d31c1c; --red-dark:#7f1010;

  --muted:#bfbfbf;
  --gap:18px;
}

html,body{
  background: radial-gradient(1200px 700px at 30% -10%, #111 0%, transparent 60%),
              radial-gradient(1000px 600px at 80% 110%, #141414 0%, transparent 55%),
              var(--bg);
  color:var(--gold); min-height:100%;
}

/* Top bar */
.navbar, .navbar * { color:var(--gold) !important; }
.navbar{
  background:linear-gradient(180deg,var(--panel-top) 0%, var(--panel-bot) 100%);
  border:1px solid var(--gold-dim); border-radius:14px; padding:12px 16px;
  box-shadow:0 0 0 2px rgba(212,175,55,.08) inset, 0 10px 30px rgba(0,0,0,.35);
}

/* Generic glass cards (also wraps Current Date Controls) */
.glass{
  background:linear-gradient(180deg,var(--panel-top) 0%, var(--panel-bot) 100%);
  border:1px solid var(--gold-dim); border-radius:14px; padding:12px 14px;
  color:var(--gold-soft);
  box-shadow:0 0 0 2px rgba(212,175,55,.07) inset, 0 8px 30px rgba(0,0,0,.4);
}
.glass .card-header{
  background:transparent; border-bottom:1px solid rgba(212,175,55,.35);
  color:var(--gold); letter-spacing:.3px; font-weight:700; padding:4px 0 10px;
  font-size:clamp(14px,1.1vw,18px);
}

/* Forms in glass cards */
.glass .form-label, .glass label{ color:var(--gold) !important; font-weight:700; }
.glass .form-control, .glass .form-select{
  background:#0f0f11; color:var(--gold) !important; border:1px solid rgba(212,175,55,.45);
}
.glass .form-control::placeholder{ color:#9a8452; }
.glass .form-control:focus, .glass .form-select:focus{
  border-color: color-mix(in srgb, var(--gold) 50%, var(--red) 50%);
  box-shadow: 0 0 0 .2rem rgba(179,28,28,.35);
}

/* ======= Responsive month layout ======= */
.months-wrap{
  display:grid; width:100%; gap:var(--gap);
  grid-template-columns:repeat(3,1fr);
}
@media (min-width:2400px){ .months-wrap{ grid-template-columns:repeat(4,1fr); } }
@media (max-width:1100px){ .months-wrap{ grid-template-columns:repeat(2,1fr); } }
@media (max-width:640px){  .months-wrap{ grid-template-columns:1fr; } }

.month-card{ overflow:visible; container-type:inline-size; } /* enable cqw units */

/* Single grid per month: change columns at breakpoints to add rows automatically */
.month-grid{
  display:grid; gap:12px;
  grid-auto-flow:row dense;
  /* wide default */
  grid-template-columns:repeat(10,1fr);
}
@media (max-width:1800px){ .month-grid{ grid-template-columns:repeat(8,1fr); } }
@media (max-width:1500px){ .month-grid{ grid-template-columns:repeat(6,1fr); } }
@media (max-width:950px) { .month-grid{ grid-template-columns:repeat(5,1fr); } }
@media (max-width:720px) { .month-grid{ grid-template-columns:repeat(4,1fr); } }

/* Day tiles (button is the whole tile) */
.day-tile-btn{ display:block; width:100%; height:100%; padding:0; border:none; background:transparent; }
.day-tile-btn:focus-visible{ outline:none; }
.day-tile-btn:hover .day-tile{
  box-shadow:0 0 0 2px rgba(179,28,28,.45) inset, 0 0 12px rgba(179,28,28,.25);
}

.day-tile{
  position:relative; overflow:hidden; aspect-ratio:1/1;
  background:linear-gradient(180deg,#18181a 0%, #121214 100%);
  border:1px solid rgba(212,175,55,.35); border-radius:12px;
  padding:30px 10px 10px 10px;
  display:flex; flex-direction:column; gap:8px;
  transition: box-shadow .12s ease, background-color .12s ease, border-color .12s ease;
}

/* Current day = red tile */
.day-tile.current-day{
  background:linear-gradient(180deg, var(--red-strong) 0%, var(--red) 60%, var(--red-dark) 100%);
  border-color: color-mix(in srgb, var(--gold) 60%, var(--red) 40%);
  box-shadow:0 0 0 2px rgba(211,28,28,.45) inset, 0 0 24px rgba(211,28,28,.35);
}

/* Day number (no bubble) */
.day-num{
  position:absolute; top:6px; left:8px; z-index:2;
  font-weight:800; letter-spacing:.2px;
  font-size:clamp(12px, 2.0cqw, 16px);
  color:var(--gold);
}
.day-tile.current-day .day-num{ color:#fff8dc; }

/* Moon pips */
.pip-wrap{ position:absolute; right:8px; top:8px; display:flex; gap:4px; z-index:2; }
.pip{ width:8px; height:8px; border-radius:50%; background:var(--gold); box-shadow:0 0 0 1px rgba(0,0,0,.35) inset; }

/* Event blurbs */
.day-events{ display:grid; grid-template-columns:1fr; grid-auto-rows:minmax(26px,auto); gap:6px; }
.event-blurb{
  display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:2;
  overflow:hidden; word-break:break-word;
  padding:clamp(4px,1.1cqw,10px) clamp(6px,1.6cqw,12px);
  border-radius:8px;
  background:linear-gradient(180deg, rgba(250,250,250,.04), rgba(250,250,250,.02));
  border:1px solid rgba(212,175,55,.35);
  color:var(--gold-soft);
  font-size:clamp(10px, 2.2cqw, 13px);
  line-height:1.2;
}
.day-tile.current-day .event-blurb{
  background:rgba(0,0,0,.25); border-color:rgba(255,255,255,.35); color:#fff9df;
}
.event-more{
  text-align:center; color:var(--gold);
  background:rgba(179,28,28,.22); border:1px solid rgba(179,28,28,.45);
  border-radius:8px; padding:4px 6px; font-size:clamp(10px, 2.0cqw, 12px);
}

/* Buttons */
.btn, .btn-primary, .btn-secondary, .btn-success, .btn-danger{
  --btn-bg:linear-gradient(180deg,#171718 0%, #101012 100%);
  --btn-bd:rgba(212,175,55,.5); --btn-tx:var(--gold);
  background:var(--btn-bg) !important; border:1px solid var(--btn-bd) !important; color:var(--btn-tx) !important;
  box-shadow:0 0 0 1px rgba(212,175,55,.12) inset;
}
.btn:hover, .btn:focus{
  border-color:color-mix(in oklab, var(--gold) 60%, var(--red) 40%) !important;
  box-shadow:0 0 0 2px rgba(179,28,28,.35) inset, 0 0 18px rgba(179,28,28,.25);
}
.btn-danger{
  --btn-bg:linear-gradient(180deg, var(--red) 0%, var(--red-dark) 100%);
  --btn-bd:rgba(255,255,255,.35); --btn-tx:#fff8f0;
}
.btn-danger:hover, .btn-danger:focus{
  border-color:#ffd3d3 !important;
  box-shadow:0 0 0 2px rgba(255,233,233,.45) inset, 0 0 18px rgba(217,63,63,.4);
}

/* Modals */
.modal .modal-content{
  background:linear-gradient(180deg,#141416 0%, #0f0f11 100%);
  color:var(--gold); border:1px solid var(--gold-dim);
  box-shadow:0 10px 40px rgba(0,0,0,.6), 0 0 0 2px rgba(212,175,55,.07) inset;
}
.modal .form-label, .modal label{ color:var(--gold) !important; font-weight:700; }
.modal .form-control, .modal .form-select{
  background:#0f0f11; color:var(--gold) !important; border:1px solid rgba(212,175,55,.45);
}
.modal .form-control::placeholder{ color:#9a8452; }
.modal .form-control:focus, .modal .form-select:focus{
  border-color: color-mix(in srgb, var(--gold) 50%, var(--red) 50%);
  box-shadow:0 0 0 .2rem rgba(179,28,28,.35);
}

/* Misc */
.edit-link{ color:var(--gold-soft) !important; text-decoration:none; }
.text-on-dark{ color:var(--gold) !important; }
.muted{ color:var(--muted); }
