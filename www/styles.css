/* ============================================================
   Harptos – Black / Gold / Red theme + Responsive Month Grid + Timeline
   + Fullscreen Video Backdrop (Backdrop.webm)
   ============================================================ */

:root{
  --bg:#0a0a0a;
  --panel-top:#141416; --panel-bot:#0f0f11;
  --gold:#d4af37; --gold-soft:#f2e3a6; --gold-dim:#a38425;
  --red:#b11a1a; --red-strong:#d31c1c; --red-dark:#7f1010;
  --muted:#bfbfbf; --gap:18px;
}

/* --- Video background ---------------------------------------------------- */
#bg-video{
  position:fixed; inset:0;
  width:100%; height:100%;
  object-fit:cover; z-index:-20;
  background:#000; pointer-events:none;
}
#bg-overlay{
  position:fixed; inset:0; z-index:-10; pointer-events:none;
  /* subtle vignette/darken to keep UI readable on bright frames */
  background:
    radial-gradient(1200px 800px at 20% -10%, rgba(0,0,0,.55) 0%, transparent 60%),
    radial-gradient(1200px 800px at 80% 110%, rgba(0,0,0,.55) 0%, transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,.30), rgba(0,0,0,.45));
}
/* Respect reduced-motion preferences */
@media (prefers-reduced-motion: reduce){
  #bg-video{ display:none; }
  #bg-overlay{ background: rgba(0,0,0,.6); }
}

html,body{
  /* fallback if video can’t load */
  background: var(--bg);
  color:var(--gold);
  min-height:100%;
}

/* Top bar */
.navbar, .navbar * { color:var(--gold) !important; }
.navbar{
  background:linear-gradient(180deg,var(--panel-top) 0%, var(--panel-bot) 100%);
  border:1px solid var(--gold-dim); border-radius:14px; padding:12px 16px;
  box-shadow:0 0 0 2px rgba(212,175,55,.08) inset, 0 10px 30px rgba(0,0,0,.35);
}

/* Generic glass cards */
.glass{
  background:linear-gradient(180deg,var(--panel-top) 0%, var(--panel-bot) 100%);
  border:1px solid var(--gold-dim); border-radius:14px; padding:12px 14px;
  color:var(--gold-soft);
  box-shadow:0 0 0 2px rgba(212,175,55,.07) inset, 0 8px 30px rgba(0,0,0,.4);
}
.glass .card-header{
  background:transparent; border-bottom:1px solid rgba(212,175,55,.35);
  color:var(--gold); letter-spacing:.3px; font-weight:700; padding:4px 0 10px;
  font-size:clamp(14px,1.1vw,18px);
}

/* Forms in glass cards */
.glass .form-label, .glass label{ color:var(--gold) !important; font-weight:700; }
.glass .form-control, .glass .form-select{
  background:#0f0f11; color:var(--gold) !important; border:1px solid rgba(212,175,55,.45);
}
.glass .form-control::placeholder{ color:#9a8452; }
.glass .form-control:focus, .glass .form-select:focus{
  border-color: color-mix(in srgb, var(--gold) 50%, var(--red) 50%);
  box-shadow:0 0 0 .2rem rgba(179,28,28,.35);
}

/* ======= Responsive month layout ======= */
.months-wrap{
  display:grid; width:100%; gap:var(--gap);
  grid-template-columns:repeat(3,1fr);
}
@media (min-width:2400px){ .months-wrap{ grid-template-columns:repeat(4,1fr); } }
@media (max-width:1100px){ .months-wrap{ grid-template-columns:repeat(2,1fr); } }
@media (max-width:640px){  .months-wrap{ grid-template-columns:1fr; } }

.month-card{ overflow:visible; container-type:inline-size; }

.month-grid{
  display:grid; gap:12px; grid-auto-flow:row dense;
  grid-template-columns:repeat(10,1fr);
}
@media (max-width:1800px){ .month-grid{ grid-template-columns:repeat(8,1fr); } }
@media (max-width:1500px){ .month-grid{ grid-template-columns:repeat(6,1fr); } }
@media (max-width:950px) { .month-grid{ grid-template-columns:repeat(5,1fr); } }
@media (max-width:720px) { .month-grid{ grid-template-columns:repeat(4,1fr); } }

.day-tile-btn{ display:block; width:100%; height:100%; padding:0; border:none; background:transparent; }
.day-tile-btn:focus-visible{ outline:none; }
.day-tile-btn:hover .day-tile{
  box-shadow:0 0 0 2px rgba(179,28,28,.45) inset, 0 0 12px rgba(179,28,28,.25);
}

.day-tile{
  position:relative; overflow:hidden; aspect-ratio:1/1;
  background:linear-gradient(180deg,#18181a 0%, #121214 100%);
  border:1px solid rgba(212,175,55,.35); border-radius:12px;
  padding:30px 10px 10px 10px;
  display:flex; flex-direction:column; gap:6px;
  transition: box-shadow .12s ease, background-color .12s ease, border-color .12s ease;
  container-type:inline-size;
}
.day-tile.current-day{
  background:linear-gradient(180deg, var(--red-strong) 0%, var(--red) 60%, var(--red-dark) 100%);
  border-color: color-mix(in srgb, var(--gold) 60%, var(--red) 40%);
  box-shadow:0 0 0 2px rgba(211,28,28,.45) inset, 0 0 24px rgba(211,28,28,.35);
}

.day-num{
  position:absolute; top:6px; left:8px; z-index:2;
  font-weight:800; letter-spacing:.2px;
  font-size:clamp(12px, 2.0cqw, 16px);
  color:var(--gold);
}
.day-tile.current-day .day-num{ color:#fff8dc; }

.pip-wrap{ position:absolute; right:8px; top:8px; display:flex; gap:4px; z-index:2; }
.pip{ width:8px; height:8px; border-radius:50%; background:var(--gold); box-shadow:0 0 0 1px rgba(0,0,0,.35) inset; }

.day-events{ display:grid; grid-template-columns:1fr; gap:2px; }
.event-blurb{
  display:block; width:100%; max-width:100%; margin:0; padding:0;
  color:var(--gold-soft);
  font-size: clamp(10px, 1.8cqw, 14px);
  line-height:1.2; overflow-wrap:anywhere; white-space:normal;
}
.day-tile.current-day .event-blurb{ color:#fff9df; }

.event-more{
  text-align:center; color:var(--gold);
  background:rgba(179,28,28,.22);
  border:1px solid rgba(179,28,28,.45);
  border-radius:8px; padding:2px 4px;
  font-size: clamp(10px, 1.6cqw, 12px);
}

.festival-label{
  position:absolute; left:10px; bottom:10px; right:10px;
  color:var(--gold); font-weight:600;
  font-size:clamp(11px, 1.8cqw, 14px);
  line-height:1.15; overflow-wrap:anywhere;
}
.day-tile.current-day .festival-label{ color:#fff7cc; }

/* Buttons */
.btn, .btn-primary, .btn-secondary, .btn-success, .btn-danger{
  --btn-bg:linear-gradient(180deg,#171718 0%, #101012 100%);
  --btn-bd:rgba(212,175,55,.5); --btn-tx:var(--gold);
  background:var(--btn-bg) !important; border:1px solid var(--btn-bd) !important; color:var(--btn-tx) !important;
  box-shadow:0 0 0 1px rgba(212,175,55,.12) inset;
}
.btn:hover, .btn:focus{
  border-color:color-mix(in oklab, var(--gold) 60%, var(--red) 40%) !important;
  box-shadow:0 0 0 2px rgba(179,28,28,.35) inset, 0 0 18px rgba(179,28,28,.25);
}
.btn-danger{
  --btn-bg:linear-gradient(180deg, var(--red) 0%, var(--red-dark) 100%);
  --btn-bd:rgba(255,255,255,.35); --btn-tx:#fff8f0;
}
.btn-danger:hover, .btn-danger:focus{
  border-color:#ffd3d3 !important;
  box-shadow:0 0 0 2px rgba(255,233,233,.45) inset, 0 0 18px rgba(217,63,63,.4);
}

/* Modals */
.modal .modal-content{
  background:linear-gradient(180deg,#141416 0%, #0f0f11 100%);
  color:var(--gold); border:1px solid var(--gold-dim);
  box-shadow:0 10px 40px rgba(0,0,0,.6), 0 0 0 2px rgba(212,175,55,.07) inset;
}
.modal .form-label, .modal label{ color:var(--gold) !important; font-weight:700; }
.modal .form-control, .modal .form-select{
  background:#0f0f11; color:var(--gold) !important; border:1px solid rgba(212,175,55,.45);
}
.modal .form-control::placeholder{ color:#9a8452; }
.modal .form-control:focus, .modal .form-select:focus{
  border-color: color-mix(in srgb, var(--gold) 50%, var(--red) 50%);
  box-shadow:0 0 0 .2rem rgba(179,28,28,.35);
}

/* ===================== TIMELINE ===================== */
.timeline-wrap{
  position:relative;
  margin: 8px auto 80px;
  max-width: 980px;
  padding: 10px 0;
}
.timeline-wrap::before{
  content:"";
  position:absolute; left:50%; top:0; bottom:0;
  width:4px; transform:translateX(-50%);
  background:linear-gradient(180deg, rgba(212,175,55,.65), rgba(212,175,55,.35));
  box-shadow: 0 0 10px rgba(212,175,55,.25);
}

.tl-item{ position:relative; }
.tl-item.expanded .tl-card-btn{
  border-color: color-mix(in srgb, var(--gold) 70%, var(--red) 30%) !important;
  box-shadow: 0 0 0 2px rgba(179,28,28,.35) inset, 0 14px 30px rgba(0,0,0,.55);
}

.tl-dot{
  position:absolute; left:50%; top:-10px; transform:translateX(-50%);
  width:10px; height:10px; border-radius:50%;
  background:var(--gold); box-shadow:0 0 0 2px rgba(0,0,0,.6) inset, 0 0 8px rgba(212,175,55,.6);
}

.tl-card-btn{
  display:block;
  margin: 0 auto;
  width: min(920px, 94vw);
  background:linear-gradient(180deg, var(--panel-top) 0%, var(--panel-bot) 100%) !important;
  border:1px solid var(--gold-dim) !important;
  color:var(--gold) !important;
  border-radius:12px;
  text-align:left; padding:0;
  box-shadow:0 8px 22px rgba(0,0,0,.45);
}
.tl-card-btn:hover, .tl-card-btn:focus{
  border-color:color-mix(in oklab, var(--gold) 60%, var(--red) 40%) !important;
  box-shadow:0 0 0 2px rgba(179,28,28,.30) inset, 0 10px 28px rgba(0,0,0,.55);
}

.tl-card{ padding:14px 18px; }
.tl-title{ font-weight:800; color:var(--gold); font-size:clamp(18px, 2.2vw, 24px); }
.tl-sub{ margin-top:2px; color:var(--gold-soft); font-size:clamp(12px, 1.6vw, 14px); }
.tl-desc{ margin-top:10px; color:var(--gold-soft); font-size:clamp(12px, 1.7vw, 15px); line-height:1.35; }

/* Misc text helpers */
.edit-link{ color:var(--gold-soft) !important; text-decoration:none; }
.text-on-dark{ color:var(--gold) !important; }
.muted{ color:var(--muted); }
